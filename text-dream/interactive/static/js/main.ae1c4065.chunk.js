/*! For license information please see main.ae1c4065.chunk.js.LICENSE.txt */
(this.webpackJsonptextdreams=this.webpackJsonptextdreams||[]).push([[0],{127:function(e,t,a){e.exports=a(143)},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"addDreamingElement",(function(){return et})),a.d(n,"updateDreamingElements",(function(){return tt})),a.d(n,"removeDreamingElement",(function(){return at})),a.d(n,"changeDreamingElementIteration",(function(){return nt})),a.d(n,"changeCardDimensions",(function(){return rt})),a.d(n,"addActiveColors",(function(){return it})),a.d(n,"removeActiveColors",(function(){return st})),a.d(n,"changeSoftmaxStatus",(function(){return ot})),a.d(n,"changeProgressPage",(function(){return ct})),a.d(n,"changeTopWordsIteration",(function(){return lt})),a.d(n,"changeDreamID",(function(){return mt})),a.d(n,"changeDreamSuccess",(function(){return ut})),a.d(n,"loadDream",(function(){return pt})),a.d(n,"changeDream",(function(){return ht})),a.d(n,"changeAnnealingSuccess",(function(){return dt})),a.d(n,"loadAnnealing",(function(){return ft})),a.d(n,"changeAnnealing",(function(){return gt})),a.d(n,"changeTopWordsSuccess",(function(){return bt})),a.d(n,"loadTopWords",(function(){return vt})),a.d(n,"changeTopWords",(function(){return Et})),a.d(n,"changeSimilarWordsSuccess",(function(){return yt})),a.d(n,"loadSimilarWords",(function(){return wt})),a.d(n,"changeSimilarWords",(function(){return Ot})),a.d(n,"changeReconstructionSuccess",(function(){return xt})),a.d(n,"loadReconstruction",(function(){return kt})),a.d(n,"changeReconstruction",(function(){return jt})),a.d(n,"changeShiftedReconstructionSuccess",(function(){return It})),a.d(n,"loadShiftedReconstruction",(function(){return Nt})),a.d(n,"changeShiftedReconstruction",(function(){return Dt}));var r=a(0),i=a.n(r),s=a(17),o=a.n(s),c=a(13),l=a(11),m=a(106),u=a(188),p=a(110),h=a(187),d=a(76),f=a(2),g=a(3),b=a(5),v=a(4),E=a(36),y=a(20),w=a(190),O=a(173),x=a(25),k=a(184),j=a(185),I=a(177),N=a(145),D=a(109),S=a.n(D),_=a(144),C=a(192),T=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.sentence.slice(1,-1),t=[];for(var a in e)e[a]===this.props.target[parseInt(a)+1]?t.push(this.props.colors[0]):e[a]===this.props.original[parseInt(a)+1]?t.push(this.props.colors[1]):t.push(this.props.colors[2]);return i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,className:"mainGrid"},e.map((function(e,a){return i.a.createElement(O.a,{item:!0,key:a},i.a.createElement(I.a,{variant:"body2",style:{color:t[a]}},e))})))}}]),a}(i.a.Component),P=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.extremes.max-this.props.extremes.min,t="M 0 20 H 10 V "+20*(1-(this.props.value-this.props.extremes.min)/e)+" H "+"-10 Z";return i.a.createElement("svg",{width:10,height:20,id:"glyphsSVG"},i.a.createElement("g",null,i.a.createElement("path",{d:t,stroke:this.props.color,fill:this.props.color}),i.a.createElement("path",{d:"M 0 0 V 20",stroke:"black"})))}}]),a}(i.a.Component),A=a(80),W=a(77),R=a(79),J=a(78),H={activation:A.a[500],ids_activation:A.a[200],loss:W.a[500],ids_loss:W.a[300],temperature:R.a[500],distance:d.a[500],distribution:J.a[500]};function V(e){return H[e]}function M(e){switch(e){case Ze.dream:return["temperature","activation","ids_activation"];case Ze.reconstruct:case Ze.reconstruct_shifted:case Ze.magnitudes:return["temperature","loss","ids_loss"];case Ze.layerMagnitudes:return["loss","ids_loss"];case Ze.top_words:return["distribution"];case Ze.similar_embeddings:return["distance","activation"];default:return[]}}function L(e){var t={};if(Object.prototype.hasOwnProperty.call(e[0],"temperature")&&(G(t,e,"temperature"),t.temperature.color=V("temperature")),Object.prototype.hasOwnProperty.call(e[0],"loss")&&(G(t,e,"loss"),t.loss.color=V("loss"),Object.prototype.hasOwnProperty.call(e[0],"ids_loss"))){G(t,e,"ids_loss"),t.ids_loss.color=V("ids_loss");var a=Math.max(t.loss.extremes.max,t.ids_loss.extremes.max);t.loss.extremes.max=a,t.ids_loss.extremes.max=a}if(Object.prototype.hasOwnProperty.call(e[0],"activation")&&(G(t,e,"activation"),t.activation.color=V("activation"),Object.prototype.hasOwnProperty.call(e[0],"ids_activation"))){G(t,e,"ids_activation"),t.ids_activation.color=V("ids_activation");var n=Math.max(t.activation.extremes.max,t.ids_activation.extremes.max);t.activation.extremes.max=n,t.ids_activation.extremes.max=n}return t}function G(e,t,a){e[a]={iterations:[],extremes:{max:0,min:0}};var n,r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[a].iterations.push(i[a]),e[a].extremes.max<i[a]&&(e[a].extremes.max=i[a])}}catch(s){r.e(s)}finally{r.f()}}function z(e,t,a){e[a]={magnitudes:[],extremes:{max:0,min:0}};var n,r=Object(x.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,s=i.results.iterations[i.results.iterations.length-1];e[a].magnitudes.push(s[a]);var o,c=Object(x.a)(i.results.iterations);try{for(c.s();!(o=c.n()).done;){var l=o.value;e[a].extremes.max<l[a]&&(e[a].extremes.max=l[a])}}catch(m){c.e(m)}finally{c.f()}}}catch(m){r.e(m)}finally{r.f()}}var B=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.results.iterations,a=L(t);return i.a.createElement(O.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(O.a,{item:!0,key:n},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Iteration Number",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(I.a,{variant:"caption",color:"inherit"},t.number))),i.a.createElement(O.a,{item:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].iterations[n].toFixed(4),placement:"top",key:t},i.a.createElement(O.a,{item:!0},i.a.createElement(P,{value:a[e].iterations[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:t.tokens,target:e.props.sentenceParams.target,original:e.props.sentenceParams.target,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component),U=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0},i.a.createElement(_.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center",wrap:"nowrap"},i.a.createElement(C.a,{title:"Input Sentence",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(I.a,{variant:"body1",color:"inherit"},"I"))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:this.props.params.tokens,target:this.props.sentenceParams.target,original:this.props.sentenceParams.target,colors:this.props.sentenceParams.colors})))))}}]),a}(i.a.Component),F=a(108),q=a.n(F);var Y={Dream:"testtesttest",TopWords:"testtesttest2",TokenSearch:"testtesttest2",SimilarEmbeddings:"testtesttest2",Reconstruct:"testtesttest2",Shift:"testtesttest2"},Q=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){for(var e,t=this,a=Object.keys(this.props.params),n={},r=0,s=a;r<s.length;r++){var o=s[r];null!==this.props.params[o]&&(n[o]=this.props.params[o])}return a=Object.keys(n),i.a.createElement(O.a,{item:!0},i.a.createElement(_.a,{className:"headingPaper",square:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:0,alignItems:"center",wrap:"nowrap"},i.a.createElement(O.a,{item:!0,container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(O.a,{item:!0},i.a.createElement(I.a,{variant:"body1",color:"inherit"},this.props.topic)),a.map((function(e,a){return i.a.createElement(O.a,{item:!0,key:a},i.a.createElement(I.a,{variant:"caption",color:"inherit"},e,": ",t.props.params[e]))}))),i.a.createElement(O.a,{item:!0},i.a.createElement(C.a,{title:i.a.createElement("span",{className:"styledTooltip"},(e=this.props.topic.replace(" ",""),Y[e]))},i.a.createElement(q.a,{className:"tooltipIcon"})),"."))))}}]),a}(i.a.Component);var X=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(Q),Z=a(180),$=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){for(var e=this,t=[],a=function(a){t.push(i.a.createElement(O.a,{item:!0,key:a},i.a.createElement(Z.a,{variant:"contained",className:"runButton",color:a+1===e.props.dreamID?"primary":"secondary",onClick:function(){return e.props.clickHandler(a+1)}},a+1)))},n=0;n<this.props.options;n++)a(n);return i.a.createElement(O.a,{item:!0,className:"selectionHead"},i.a.createElement(O.a,{container:!0,direction:"row",spacing:2,alignItems:"center",justify:"center"},t.map((function(e){return e}))))}}]),a}(i.a.Component);var K=Object(l.b)((function(e,t){return{dreamID:e.dreamID}}),null)($),ee=a(24);function te(e,t){var a=e.iterations,n=8*(a[a.length-1].number.toString().length+1),r=n+24,i=Object(ee.a)(t.tokens);for(var s in i)t.dream_start<=s&&t.dream_end>=s&&(i[s]="");return{itWidth:n,headWidth:r,colors:["black","black","blue"],target:i,original:Object(ee.a)(t.tokens)}}function ae(e,t){var a=e.iterations,n=8*(a[a.length-1].number.toString().length+1),r=n+24,i=Object(ee.a)(t.tokens);for(var s in i)(t.dream_start>s||t.dream_end<s)&&(i[s]="");return{itWidth:n,headWidth:r,colors:["green","black","red"],target:i,original:Object(ee.a)(t.tokens)}}function ne(e,t){var a=e.iterations,n=8*(a[a.length-1].number.toString().length+1),r=n+24,i=Object(ee.a)(t.tokens),s=Object(ee.a)(t.tokens);for(var o in i)t.shift_start>=o&&t.shift_end<=o?(i[o]=t.target,s[o]=t.target):i[o]="";return{itWidth:n,headWidth:r,colors:["green","black","red"],target:i,changedSentence:s,original:Object(ee.a)(t.tokens)}}function re(e,t){var a,n=t[0].results.iterations[t[0].results.iterations.length-1].sentence,r=0,i=Object(x.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=0;for(var c in e)s.results.iterations[s.results.iterations.length-1].tokens[c]===e[c]&&(o+=1);o>r&&(r=o,n=s.results.iterations[s.results.iterations.length-1].tokens)}}catch(l){i.e(l)}finally{i.f()}return n}var ie=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=te(this.props.results,this.props.params),t={LayerID:this.props.params.layer_id,WordID:this.props.params.word_id,NeuronID:this.props.params.neuron_id};return i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap",justify:"center"},i.a.createElement(X,{topic:"Dream",params:t,elementIndex:this.props.elementIndex}),i.a.createElement(U,{params:this.props.params,sentenceParams:e}),i.a.createElement("div",{className:"overflow"},i.a.createElement(_.a,{className:"dreamPaper"},i.a.createElement(B,{results:this.props.results,params:this.props.params,sentenceParams:e}))),i.a.createElement(K,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeDream(e)}}]),a}(i.a.PureComponent);var se=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(ie),oe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0},i.a.createElement(_.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(C.a,{title:"Reconstruct Target",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(I.a,{variant:"body1",color:"inherit"},"T"))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:this.props.params.tokens,target:this.props.sentenceParams.target,original:this.props.params.tokens,colors:this.props.sentenceParams.colors})))))}}]),a}(i.a.Component),ce=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.results.iterations,a=L(t);return i.a.createElement(O.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(O.a,{item:!0,key:n},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Iteration Number",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(I.a,{variant:"caption",color:"inherit"},t.number))),i.a.createElement(O.a,{item:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].iterations[n].toFixed(4),placement:"top",key:t},i.a.createElement(O.a,{item:!0},i.a.createElement(P,{value:a[e].iterations[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:t.tokens,target:e.props.sentenceParams.target,original:e.props.params.tokens,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component),le=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=ae(this.props.results,this.props.params),t={LayerID:this.props.params.layer_id,WordID:this.props.params.word_id,NeuronID:this.props.params.neuron_id};return i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(X,{topic:"Reconstruct",params:t,elementIndex:this.props.elementIndex}),i.a.createElement(oe,{results:this.props.results,params:this.props.params,sentenceParams:e}),i.a.createElement("div",{className:"overflow"},i.a.createElement(_.a,{className:"dreamPaper"},i.a.createElement(ce,{results:this.props.results,params:this.props.params,sentenceParams:e}))))}}]),a}(i.a.PureComponent),me=a(191),ue=a(181),pe=a(182),he=a(23),de=a.n(he),fe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0},i.a.createElement(_.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(C.a,{title:"Reconstruct Input",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(I.a,{variant:"body1",color:"inherit"},"I"))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:this.props.params.tokens,target:this.props.sentenceParams.target,original:this.props.params.tokens,colors:this.props.sentenceParams.colors})))),i.a.createElement(_.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(C.a,{title:"Reconstruct Target",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:this.props.sentenceParams.headWidth}},i.a.createElement(I.a,{variant:"body1",color:"inherit"},"T"))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:this.props.sentenceParams.changedSentence,target:this.props.sentenceParams.target,original:this.props.params.tokens,colors:this.props.sentenceParams.colors})))))}}]),a}(i.a.Component),ge=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.magnitudes;t.sort((function(e,t){return e.params.shift_magnitude-t.params.shift_magnitude}));var a=function(e){var t={},a=e[0].results.iterations[0];return Object.prototype.hasOwnProperty.call(a,"loss")&&(z(t,e,"loss"),t.loss.color=V("loss")),Object.prototype.hasOwnProperty.call(a,"ids_loss")&&(z(t,e,"ids_loss"),t.ids_loss.color=V("ids_loss")),t}(t);return i.a.createElement(O.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(O.a,{item:!0,key:n},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Shift Magnitude",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(I.a,{variant:"caption",color:"inherit"},t.params.shift_magnitude))),i.a.createElement(O.a,{item:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].magnitudes[n].toFixed(4),placement:"top",key:t},i.a.createElement(O.a,{item:!0},i.a.createElement(P,{value:a[e].magnitudes[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:t.results.iterations[t.results.iterations.length-1].tokens,target:e.props.sentenceParams.target,original:t.params.tokens,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component),be=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props.results.iterations,a=L(t);return i.a.createElement(O.a,{container:!0,direction:"column",spacing:2,wrap:"nowrap"},t.map((function(t,n){return i.a.createElement(O.a,{item:!0,key:n},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1},i.a.createElement(C.a,{title:"Iteration Number",placement:"top"},i.a.createElement(O.a,{item:!0,style:{width:e.props.sentenceParams.itWidth}},i.a.createElement(I.a,{variant:"caption",color:"inherit"},t.number))),i.a.createElement(O.a,{item:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:0},Object.keys(a).map((function(e,t){return i.a.createElement(C.a,{title:e+": "+a[e].iterations[n].toFixed(4),placement:"top",key:t},i.a.createElement(O.a,{item:!0},i.a.createElement(P,{value:a[e].iterations[n],extremes:a[e].extremes,color:a[e].color})))})))),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:t.tokens,target:e.props.sentenceParams.target,original:e.props.params.tokens,colors:e.props.sentenceParams.colors}))))})))}}]),a}(i.a.Component);var ve=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.layers[0].type,t=M("magnitudes"===e?"layerMagnitudes":e);this.props.actions.addActiveColors(t)}},{key:"render",value:function(){var e;switch(this.props.layers[0].type){case"dream":e=function(e){e.sort((function(e,t){return e.params.layer_id-t.params.layer_id}));var t,a=[],n=[],r=[],s=te(e[0].results,e[0].params),o=i.a.createElement(U,{params:e[0].params,sentenceParams:s}),c={WordID:e[0].params.word_id,NeuronID:e[0].params.neuron_id},l=Object(x.a)(e);try{for(l.s();!(t=l.n()).done;){var m=t.value;r.push(m.params.layer_id),a.push(i.a.createElement(B,{results:m.results,params:m.params,sentenceParams:s})),n.push(m.results.iterations[m.results.iterations.length-1].tokens)}}catch(u){l.e(u)}finally{l.f()}return{head:o,sentences:n,layerIDs:r,topic:"Dream",sentenceParams:s,headParams:c,bodies:a}}(this.props.layers);break;case"reconstruct":e=function(e){e.sort((function(e,t){return e.params.layer_id-t.params.layer_id}));var t,a=[],n=[],r=[],s=ae(e[0].results,e[0].params),o=i.a.createElement(oe,{results:e[0].results,params:e[0].params,sentenceParams:s}),c={WordID:e[0].params.word_id,NeuronID:e[0].params.neuron_id},l=Object(x.a)(e);try{for(l.s();!(t=l.n()).done;){var m=t.value;r.push(m.params.layer_id),a.push(i.a.createElement(ce,{results:m.results,params:m.params,sentenceParams:s})),n.push(m.results.iterations[m.results.iterations.length-1].tokens)}}catch(u){l.e(u)}finally{l.f()}return{head:o,sentences:n,layerIDs:r,topic:"Reconstruct",sentenceParams:s,headParams:c,bodies:a}}(this.props.layers);break;case"magnitudes":e=function(e){e.sort((function(e,t){return e.magnitudes[0].params.layer_id-t.magnitudes[0].params.layer_id}));var t=[],a=[],n=[],r=ne(e[0].magnitudes[0].results,e[0].magnitudes[0].params);r.headWidth=r.headWidth-10;var s,o={WordID:e[0].magnitudes[0].params.word_id,NeuronID:e[0].magnitudes[0].params.neuron_id},c=i.a.createElement(fe,{params:e[0].magnitudes[0].params,sentenceParams:r}),l=Object(x.a)(e);try{for(l.s();!(s=l.n()).done;){var m=s.value;n.push(m.magnitudes[0].params.layer_id),t.push(i.a.createElement(ge,{magnitudes:m.magnitudes,sentenceParams:r})),a.push(re(r.changedSentence,m.magnitudes))}}catch(u){l.e(u)}finally{l.f()}return{head:c,sentences:a,layerIDs:n,topic:"Shift",sentenceParams:r,headParams:o,bodies:t}}(this.props.layers)}return e.sentenceParams.headWidth=e.sentenceParams.headWidth+14,i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap",justify:"center"},i.a.createElement(X,{topic:e.topic,params:e.headParams,elementIndex:this.props.elementIndex}),e.head,i.a.createElement("div",{className:"overflow"},e.bodies.map((function(t,a){return i.a.createElement(me.a,{key:a},i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null)},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(O.a,{item:!0,style:{width:e.sentenceParams.headWidth}},i.a.createElement(I.a,{variant:"body1",color:"inherit"},e.layerIDs[a])),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:e.sentences[a],target:e.sentenceParams.target,original:e.sentenceParams.original,colors:e.sentenceParams.colors})))),i.a.createElement(pe.a,null,t))}))),i.a.createElement(K,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){switch(this.props.layers[0].type){case"dream":this.props.actions.changeDream(e);break;case"reconstruct":this.props.actions.changeReconstruction(e);break;case"magnitudes":this.props.actions.changeShiftedReconstruction(e)}}}]),a}(i.a.PureComponent);var Ee=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(ve),ye=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e={LayerID:this.props.magnitudes[0].params.layer_id,WordID:this.props.magnitudes[0].params.word_id,NeuronID:this.props.magnitudes[0].params.neuron_id},t=ne(this.props.magnitudes[0].results,this.props.magnitudes[0].params),a=function(e){e.sort((function(e,t){return e.params.shift_magnitude-t.params.shift_magnitude}));var t,a=[],n=[],r=[],s=ne(e[0].results,e[0].params),o={LayerID:e[0].params.layer_id,WordID:e[0].params.word_id,NeuronID:e[0].params.neuron_id},c=i.a.createElement(fe,{params:e[0].params,sentenceParams:s}),l=Object(x.a)(e);try{for(l.s();!(t=l.n()).done;){var m=t.value;r.push(m.params.shift_magnitude),a.push(i.a.createElement(be,{results:m.results,params:m.params,sentenceParams:s})),n.push(m.results.iterations[m.results.iterations.length-1].tokens)}}catch(u){l.e(u)}finally{l.f()}return{head:c,sentences:n,magnitudeValues:r,topic:"Shift",sentenceParams:s,headParams:o,bodies:a}}(this.props.magnitudes);return i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(X,{topic:"Shifted Reconstruct",params:e,elementIndex:this.props.elementIndex}),i.a.createElement(fe,{params:this.props.magnitudes[0].params,sentenceParams:t}),i.a.createElement("div",{className:"overflow"},a.bodies.map((function(e,t){return i.a.createElement(me.a,{key:t},i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null)},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(O.a,{item:!0,style:{width:a.sentenceParams.headWidth}},i.a.createElement(I.a,{variant:"body1",color:"inherit"},a.magnitudeValues[t])),i.a.createElement(O.a,{item:!0},i.a.createElement(T,{sentence:a.sentences[t],target:a.sentenceParams.target,original:a.sentenceParams.original,colors:a.sentenceParams.colors})))),i.a.createElement(pe.a,null,e))}))))}}]),a}(i.a.PureComponent),we=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=ne(this.props.results,this.props.params),t={LayerID:this.props.params.layer_id,WordID:this.props.params.word_id,NeuronID:this.props.params.neuron_id,Magnitude:this.props.params.shift_magnitude};return i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(X,{topic:"Shifted Reconstruct",params:t,elementIndex:this.props.elementIndex}),i.a.createElement(fe,{params:this.props.params,sentenceParams:e}),i.a.createElement("div",{className:"overflow"},i.a.createElement(_.a,{className:"dreamPaper"},i.a.createElement(be,{params:this.props.params,results:this.props.results,sentenceParams:e}))))}}]),a}(i.a.PureComponent),Oe=a(193),xe=a(183),ke=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSliderChange=function(t,a){e.props.actions.changeTopWordsIteration(a)},e.handleInputChange=function(t){var a=""===t.target.value?"":Number(t.target.value);e.props.actions.changeTopWordsIteration(a)},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.iteration;return i.a.createElement(O.a,{item:!0},i.a.createElement(_.a,{className:"subHeadingPaper",style:{backgroundColor:"#DDDDDD"},square:!0},i.a.createElement(O.a,{container:!0,direction:"row",spacing:1,alignItems:"center"},i.a.createElement(C.a,{title:"Input Sentence",placement:"top"},i.a.createElement(O.a,{item:!0,style:{paddingRight:10}},i.a.createElement(I.a,{variant:"body1",color:"inherit"},"Iteration:"))),i.a.createElement(O.a,{item:!0,xs:!0},i.a.createElement(Oe.a,{value:e,onChange:this.handleSliderChange,max:this.props.maxIterations,"aria-labelledby":"input-slider"})),i.a.createElement(O.a,{item:!0,style:{paddingLeft:10}},i.a.createElement(xe.a,{value:e,margin:"dense",onChange:this.handleInputChange,inputProps:{step:1,min:0,max:this.props.maxIterations,type:"number","aria-labelledby":"input-slider"},className:"inputElement"})))))}}]),a}(i.a.Component);var je=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(ke),Ie=a(26),Ne=50,De=20,Se=40,_e=100,Ce=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(this.props.cardDimensions)!==JSON.stringify(e.cardDimensions)?this.drawGraph():this.updateGraph()}},{key:"setupGraphParams",value:function(){var e=20+De+_e,t=170+Ne+Se,a=this.props.cardDimensions.width>e?this.props.cardDimensions.width-e:20,n=this.props.cardDimensions.height>t?this.props.cardDimensions.height-t:20,r=this.props.iteration,i=this.props.dreamingElement.iterations[r],s=Ie.d().domain([0,1]).range([0,a]),o=Ie.c().range([0,n]).padding(.1).domain(i.tokens.map((function(e){return e})));return{xScale:s,yScale:o,yAxis:Ie.a(o),svg:Ie.e(".topWordsComponent"+this.props.elementIndex),currentResults:i}}},{key:"drawGraph",value:function(){var e=this.setupGraphParams();e.svg.select("g").remove();var t=Ie.b(e.xScale),a=e.svg.append("g").attr("transform","translate("+_e+","+Ne+")");a.selectAll("bar").data(e.currentResults.scores).enter().append("rect").style("fill",V("distribution")).attr("x",0).attr("width",(function(t){return e.xScale(t)})).attr("y",(function(t,a){return e.yScale(e.currentResults.tokens[a])})).attr("height",e.yScale.bandwidth()),a.append("g").attr("class","xAxis").call(t).selectAll("text").style("font-size","0.875rem"),a.append("g").attr("class","yAxis").call(e.yAxis).selectAll("text").style("font-size","0.875rem")}},{key:"updateGraph",value:function(){var e=this.setupGraphParams(),t=e.svg.select("g");t.selectAll(".bar").remove().exit().data(e.currentResults.scores).enter().append("rect").attr("class","bar").style("fill",V("distribution")).attr("x",0).attr("width",(function(t){return e.xScale(t)})).attr("y",(function(t,a){return e.yScale(e.currentResults.tokens[a])})).attr("height",e.yScale.bandwidth()),t.select(".yAxis").call(e.yAxis).selectAll("text")}},{key:"render",value:function(){return i.a.createElement("svg",{width:"100%",height:"100%",className:"topWordsComponent"+this.props.elementIndex})}}]),a}(i.a.Component);var Te=Object(l.b)((function(e,t){return{cardDimensions:e.cardDimensions}}))(Ce),Pe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.topWordsIteration;e=e<this.props.dreamingElement.iterations.length?e:this.props.dreamingElement.iterations.length-1;var t={LayerID:this.props.dreamingElement.params.layer_id,WordID:this.props.dreamingElement.params.word_id,NeuronID:this.props.dreamingElement.params.neuron_id,Activation:this.props.dreamingElement.iterations[e].activation.toFixed(4)},a=Object(ee.a)(this.props.dreamingElement.params.tokens);for(var n in this.props.dreamingElement.params.tokens)this.props.dreamingElement.word_id!==parseInt(n)&&(a[n]="");var r={headWidth:30,colors:["blue","black","black"],target:a},s={tokens:this.props.dreamingElement.params.tokens},o=this.props.dreamingElement.iterations[this.props.dreamingElement.iterations.length-1].number;return i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(X,{topic:"Top Words",params:t,elementIndex:this.props.elementIndex}),i.a.createElement(U,{params:s,sentenceParams:r}),i.a.createElement(je,{maxIterations:o,dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex,iteration:e}),i.a.createElement(O.a,{item:!0,xs:!0},i.a.createElement(_.a,{id:"topWordsPaper",className:"dreamPaper fullHeight"},i.a.createElement(Te,{dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex,iteration:e}))),i.a.createElement(K,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeAnnealing(e)}}]),a}(i.a.PureComponent);var Ae=Object(l.b)((function(e,t){return{topWordsIteration:e.topWordsIteration}}),(function(e){return{actions:Object(c.b)(n,e)}}))(Pe),We=20,Re=20,Je=20,He=100,Ve=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(){this.drawGraph()}},{key:"render",value:function(){return i.a.createElement("svg",{width:"100%",height:"100%",className:"similarEmbeddingsComponent"+this.props.elementIndex})}},{key:"drawGraph",value:function(){var e=20+Re+He,t=120+We+Je,a=this.props.cardDimensions.width>e?this.props.cardDimensions.width-e:20,n=this.props.cardDimensions.height>t?this.props.cardDimensions.height-t:20,r=Ie.e(".similarEmbeddingsComponent"+this.props.elementIndex);r.select("g").remove();var i=this.props.dreamingElement.tops;i.length>20&&(i=i.splice(0,20));var s,o=i[0].activation,c=0,l=Object(x.a)(i);try{for(l.s();!(s=l.n()).done;){var m=s.value;c=m.activation<c?m.activation:c}}catch(g){l.e(g)}finally{l.f()}var u=Ie.d().domain([c,o]).range([0,a]),p=Ie.d().domain([0,this.props.dreamingElement.furthest]).range([0,a]),h=Ie.c().range([0,n]).padding(.1).domain(i.map((function(e){return e.token}))),d=Ie.a(h),f=r.append("g").attr("transform","translate("+He+","+We+")");f.selectAll("bar").data(i).enter().append("rect").style("fill",V("activation")).attr("x",0).attr("width",(function(e){return u(e.activation)})).attr("y",(function(e){return h(e.token)})).attr("height",h.bandwidth()/2),f.selectAll("txt").data(i).enter().append("text").attr("y",(function(e){return h(e.token)+h.bandwidth()/2-2})).attr("x",(function(e){return 3})).text((function(e){return e.activation.toFixed(4)})),f.selectAll("bar").data(i).enter().append("rect").style("fill",V("distance")).attr("x",0).attr("width",(function(e){return p(e.distance)})).attr("y",(function(e){return h(e.token)+h.bandwidth()/2})).attr("height",h.bandwidth()/2),f.selectAll("txt").data(i).enter().append("text").attr("y",(function(e){return h(e.token)+h.bandwidth()-2})).attr("x",(function(e){return 3})).text((function(e){return e.distance.toFixed(2)})),f.append("g").attr("class","yAxis").call(d).selectAll("text").style("font-size","0.875rem")}}]),a}(i.a.Component);var Me=Object(l.b)((function(e,t){return{cardDimensions:e.cardDimensions}}))(Ve),Le=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e={LayerID:this.props.dreamingElement.layer_id,WordID:this.props.dreamingElement.word_id,NeuronID:this.props.dreamingElement.neuron_id},t=Object(ee.a)(this.props.dreamingElement.tokens);for(var a in this.props.dreamingElement.tokens)this.props.dreamingElement.change_word!==parseInt(a)&&(t[a]="");var n={headWidth:30,colors:["blue","black","black"],target:t},r={tokens:this.props.dreamingElement.tokens};return i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(X,{topic:"Similar Embeddings",params:e,elementIndex:this.props.elementIndex}),i.a.createElement(U,{params:r,sentenceParams:n}),i.a.createElement(O.a,{item:!0,xs:!0},i.a.createElement(_.a,{id:"topWordsPaper",className:"dreamPaper fullHeight"},i.a.createElement(Me,{dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex}))),i.a.createElement(K,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeSimilarWords(e)}}]),a}(i.a.PureComponent);var Ge=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(Le),ze=20,Be=20,Ue=20,Fe=100,qe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.drawGraph()}},{key:"componentDidUpdate",value:function(){this.drawGraph()}},{key:"render",value:function(){return i.a.createElement("svg",{width:"100%",height:"100%",className:"tokenSearchComponent"+this.props.elementIndex})}},{key:"drawGraph",value:function(){var e=20+Be+Fe,t=120+ze+Ue,a=this.props.cardDimensions.width>e?this.props.cardDimensions.width-e:20,n=this.props.cardDimensions.height>t?this.props.cardDimensions.height-t:20,r=Ie.e(".tokenSearchComponent"+this.props.elementIndex);r.select("g").remove();var i=this.props.dreamingElement.tops;i.length>30&&(i=i.slice(0,30));var s,o=i[0].activation,c=0,l=Object(x.a)(i);try{for(l.s();!(s=l.n()).done;){var m=s.value;c=m.activation<c?m.activation:c}}catch(f){l.e(f)}finally{l.f()}var u=Ie.d().domain([c,o]).range([0,a]),p=Ie.c().range([0,n]).padding(.1).domain(i.map((function(e){return e.token}))),h=Ie.a(p),d=r.append("g").attr("transform","translate("+Fe+","+ze+")");d.selectAll("bar").data(i).enter().append("rect").style("fill",V("activation")).attr("x",0).attr("width",(function(e){return u(e.activation)})).attr("y",(function(e){return p(e.token)})).attr("height",p.bandwidth()),d.selectAll("text").data(i).enter().append("text").attr("y",(function(e){return p(e.token)+p.bandwidth()/2+5})).attr("x",(function(e){return 3})).text((function(e){return e.activation.toFixed(4)})),d.append("g").attr("class","yAxis").call(h).selectAll("text").style("font-size","0.875rem")}}]),a}(i.a.Component);var Ye=Object(l.b)((function(e,t){return{cardDimensions:e.cardDimensions}}))(qe),Qe=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e={LayerID:this.props.dreamingElement.layer_id,WordID:this.props.dreamingElement.word_id,NeuronID:this.props.dreamingElement.neuron_id},t=Object(ee.a)(this.props.dreamingElement.tokens);for(var a in this.props.dreamingElement.tokens)this.props.dreamingElement.change_word!==parseInt(a)&&(t[a]="");var n={headWidth:30,colors:["blue","black","black"],target:t},r={tokens:this.props.dreamingElement.tokens};return i.a.createElement(O.a,{container:!0,direction:"column",className:"fullHeight",wrap:"nowrap"},i.a.createElement(X,{topic:"Token Search",params:e,elementIndex:this.props.elementIndex}),i.a.createElement(U,{params:r,sentenceParams:n}),i.a.createElement(O.a,{item:!0,xs:!0},i.a.createElement(_.a,{id:"topWordsPaper",className:"dreamPaper fullHeight"},i.a.createElement(Ye,{dreamingElement:this.props.dreamingElement,elementIndex:this.props.elementIndex}))),i.a.createElement(K,{options:3,clickHandler:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){this.props.actions.changeTopWords(e)}}]),a}(i.a.PureComponent);var Xe=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(Qe),Ze={dream:"dream",reconstruct:"reconstruct",reconstruct_shifted:"reconstruct_shifted",top_words:"top_words",similar_embeddings:"similar_embeddings",token_search:"token_search",magnitudes:"magnitudes",layer_magnitudes:"layer_magnitudes",layers:"layers"};function $e(e,t){var a;switch(e.type){case Ze.dream:a=i.a.createElement(se,{results:e.results,params:e.params,elementIndex:t});break;case Ze.reconstruct:a=i.a.createElement(le,{results:e.results,params:e.params,elementIndex:t});break;case Ze.reconstruct_shifted:a=i.a.createElement(we,{results:e.results,params:e.params,elementIndex:t});break;case Ze.top_words:a=i.a.createElement(Ae,{dreamingElement:e,elementIndex:t});break;case Ze.similar_embeddings:a=i.a.createElement(Ge,{dreamingElement:e,elementIndex:t});break;case Ze.token_search:a=i.a.createElement(Xe,{dreamingElement:e,elementIndex:t});break;case Ze.magnitudes:a=i.a.createElement(ye,{magnitudes:e.magnitudes,elementIndex:t});break;case Ze.layers:a=i.a.createElement(Ee,{layers:e.layers,elementIndex:t});break;default:a=i.a.createElement("div",null)}return a}var Ke=function(){function e(){Object(f.a)(this,e)}return Object(g.a)(e,null,[{key:"getDreamJSON",value:function(e){var t=e+"_dream.json";return this.fetchData(t)}},{key:"getAnnealingJSON",value:function(e){var t=e+"_annealing.json";return this.fetchData(t)}},{key:"getTopWordsJSON",value:function(e){var t=e+"_top_words.json";return this.fetchData(t)}},{key:"getSimilarWordsJSON",value:function(e){var t=e+"_similar_words.json";return this.fetchData(t)}},{key:"getReconstructionJSON",value:function(e){var t=e+"_reconstruction.json";return this.fetchData(t)}},{key:"getShiftedReconstructionJSON",value:function(e){var t=e+"_shifted_reconstruction.json";return this.fetchData(t)}},{key:"fetchData",value:function(e){var t=new Request("".concat("//interpretability/text-dream/interactive","/data/").concat(e),{method:"GET"});return fetch(t).then((function(e){return e.json()})).catch((function(e){return e}))}}]),e}();function et(e){return e.type===Ze.top_words&&(e.iteration=0),{type:"ADD_DREAMING_ELEMENT",element:e}}function tt(e){return{type:"UPDATE_DREAMING_ELEMENTS",elements:e}}function at(e){return{type:"REMOVE_DREAMING_ELEMENT",index:e}}function nt(e,t){return{type:"CHANGE_DREAMING_ELEMENT_ITERATION",iteration:e,index:t}}function rt(e){return{type:"CHANGE_CARD_DIMENSIONS",dimensions:e}}function it(e){return{type:"ADD_ACTIVE_COLORS",colors:e}}function st(e){return{type:"REMOVE_ACTIVE_COLORS",index:e}}function ot(e){return{type:"CHANGE_SOFTMAX_STATUS",status:e}}function ct(e){return{type:"CHANGE_PROGRESS_PAGE",page:e}}function lt(e){return{type:"CHANGE_TOP_WORDS_ITERATION",iteration:e}}function mt(e){return{type:"CHANGE_DREAM_ID",id:e}}function ut(e){return{type:"LOAD_DREAM_SUCCESS",results:e}}function pt(e){return function(t){return Ke.getDreamJSON(e).then((function(e){t(ut(e))}))}}function ht(e){return function(t){return Ke.getDreamJSON(e).then((function(a){t(mt(e)),t(ut(a))}))}}function dt(e){return{type:"LOAD_ANNEALING_SUCCESS",results:e}}function ft(e){return function(t){return Ke.getAnnealingJSON(e).then((function(e){t(dt(e))}))}}function gt(e){return function(t){return Ke.getAnnealingJSON(e).then((function(a){t(mt(e)),t(dt(a))}))}}function bt(e){return{type:"LOAD_TOP_WORDS_SUCCESS",results:e}}function vt(e){return function(t){return Ke.getTopWordsJSON(e).then((function(e){t(bt(e))}))}}function Et(e){return function(t){return Ke.getTopWordsJSON(e).then((function(a){t(mt(e)),t(bt(a))}))}}function yt(e){return{type:"LOAD_SIMILAR_WORDS_SUCCESS",results:e}}function wt(e){return function(t){return Ke.getSimilarWordsJSON(e).then((function(e){t(yt(e))}))}}function Ot(e){return function(t){return Ke.getSimilarWordsJSON(e).then((function(a){t(mt(e)),t(yt(a))}))}}function xt(e){return{type:"LOAD_RECONSTRUCTION_SUCCESS",results:e}}function kt(e){return function(t){return Ke.getReconstructionJSON(e).then((function(e){t(xt(e))}))}}function jt(e){return function(t){return Ke.getReconstructionJSON(e).then((function(a){t(mt(e)),t(xt(a))}))}}function It(e){return{type:"LOAD_SHIFTED_RECONSTRUCTION_SUCCESS",results:e}}function Nt(e){return function(t){return Ke.getShiftedReconstructionJSON(e).then((function(e){t(It(e))}))}}function Dt(e){return function(t){return Ke.getShiftedReconstructionJSON(e).then((function(a){t(mt(e)),t(It(a))}))}}var St=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).addElement=function(t){var a,n=Object(x.a)(t.target.files);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r){var i=new window.FileReader;i.onload=function(e){return function(t){e(JSON.parse(t.target.result))}}(e.props.actions.addDreamingElement),i.readAsText(r)}}}catch(s){n.e(s)}finally{n.f()}},e.onInputClick=function(e){e.target.value=""},e}return Object(g.a)(a,[{key:"render",value:function(){return r.createElement(k.a,{position:"fixed",color:"primary"},r.createElement(j.a,{variant:"dense"},r.createElement(I.a,{variant:"h6",color:"inherit"},"What does BERT dream of?"),r.createElement(I.a,{variant:"caption",color:"inherit",className:"appTitle"},"\xa0\xa0\xa0- A visual investigation of nightmares in sesame street by Alex B\xe4uerle (",r.createElement("a",{href:"https://twitter.com/a13xba"},"@a13xba"),") and James Wexler (",r.createElement("a",{href:"https://twitter.com/bengiswex"},"@bengiswex"),") of ",r.createElement("a",{href:"https://ai.google/research/teams/brain/pair"},"PAIR"),"."),r.createElement(N.a,{"aria-label":"github",style:{color:"white"},href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream"},r.createElement(S.a,null))))}}]),a}(r.Component);var _t=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(St),Ct=a(186),Tt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(Ct.a,{variant:"determinate",className:"progress",value:this.props.progress.page/this.props.progress.of*100})}}]),a}(i.a.Component);var Pt=Object(l.b)((function(e,t){return{progress:e.progress}}))(Tt),At=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem"},i.a.createElement("h1",null,this.props.title))}}]),a}(i.a.Component),Wt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},i.a.createElement("a",{href:"https://distill.pub/2017/feature-visualization/"},"Feature Visualization")," is a common tool for interpretability of neural networks. The ideas of feature visualization are borrowed from ",i.a.createElement("a",{href:"https://ai.googleblog.com/2015/06/inceptionism-going-deeper-into-neural.html"},"Deep Dream"),", where we can obtain inputs that excite the network by maximizing the activation of neurons, channels, or layers of the network. This way, we get an idea about which part of the network is looking for what kind of input."),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Deep Dream"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"In Deep Dream, inputs are changed through gradient descent to maximize activation values. This can be thought of as similar to the initial training process, where through many iterations, we try to optimize a mathematical equation. But instead of updating network parameters, Deep Dream updates the input sample. What this leads to is somewhat psychedelic but very interesting images, that can reveal to what kind of input these neurons react."))),i.a.createElement("p",{className:"normalText"},"This explainable provides visual insight into how we adapted the techniques of feature visualization to text-based models. Along this line, we ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/webapp"},"visually illustrate")," this process, and explore reasons for why feature visualization does not work as well for text. We also publish ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/python"},"tools")," to explore this direction further."),i.a.createElement("p",{className:"normalText"},"Our experiments have been conducted with ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1810.04805.pdf"},"BERT"),", a neural network published by Google in 2018. BERT excels in natural language understanding. It can be used for multiple different tasks, such as sentiment analysis or next sentence prediction, and has ",i.a.createElement("a",{href:"https://www.blog.google/products/search/search-language-understanding-bert/"},"recently been integrated into Google Search"),"."))}}]),a}(i.a.Component),Rt=a(89),Jt=a.n(Rt),Ht=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"When dreaming for images, the input to the model is gradually changed. Language, however, is made of discrete structures, i.e. tokens, which represent words, or word-pieces. Thus, there is no such gradual change to be made",i.a.createElement(C.a,{title:i.a.createElement("span",{className:"styledTooltip"},"Looking at a single pixel in an input image, such a change could be gradually going from green to red. The green value would slowly go down, while the red value would increase. In language, however, we can not slowly go from the word 'green' to the word 'red', as everything in between does not make sense.")},i.a.createElement("sup",null,"[i]")),"."),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Word Embeddings"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},'Language models operate on embeddings of words. Using these embeddings, words are converted into high-dimensional vectors of continuous numbers. In this embedding space, words with similar meanings are closer together than words with different meanings. You might ask: "Why can\'t we use these embeddings to dream to?" The answer is that there is often no mapping from unconstrained embedding vectors back to real tokens. With Deep Dream changing the embeddings rather than input tokens, we can end up with embeddings that are nowhere close to any token.'))),i.a.createElement("p",{className:"normalText"},"To still be able to use Deep Dream, we have to utilize the so-called softmax-trick, which has already been employed in a ",i.a.createElement("a",{href:"https://www.aclweb.org/anthology/W18-5437"},"paper by Poerner et. al."),". This trick was introduced by ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1611.01144.pdf"},"Jang et. al.")," and ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1611.00712.pdf"},"Maddison et. al."),". It allows us to soften the requirement for discrete inputs, and instead use a linear combination of tokens as input to the model. To assure that we do not end up with something crazy, it uses two mechanisms. First, it constrains this linear combination so that the linear weights sum up to one. This, however, still leaves the problem that we can end up with any linear combination of such tokens, including ones that are not close to real tokens in the embedding space. Therefore, we also make use of a temperature parameter, which controls the sparsity of this linear combination. By slowly decreasing this temperature value, we can make the model first explore different linear combinations of tokens, before deciding on one token. You can experiment with this mechanism in this visualization."),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Softmax Trick"),i.a.createElement(pe.a,null,i.a.createElement(Jt.a.Context,{input:"tex"},i.a.createElement("p",{className:"smallText"},"The trick does two things. To ensure that we sum up to one for the linear combination of tokens, it takes the softmax function over the smooth input token distribution. However, before applying the softmax function, we divide our token distribution vector by a temperature value, i.e. ",i.a.createElement(Jt.a.Node,{inline:!0},"softmax(token\\_distribution / t)"),". Dividing by large temperature values means that the softmax result will be smooth, whereas dividing by small temperature values results in a more spiky softmax function.")))))}}]),a}(i.a.Component),Vt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"Now that we know how Deep Dream can be used in combination with text models, what do those results look like? Well, very unpredictable. For some neurons it was possible to produce sentences that highly activated them, however, for other neurons we weren't able to dream such sentences",i.a.createElement(C.a,{title:i.a.createElement("span",{className:"styledTooltip"},"As a baseline for all experiments, we used results from corpus search. Here, we searched through a large corpus of sentences and looked into which one activates the neuron of interest most. We always started the process with one of the top 10 sentences from this corpus, as this approach has a lot more freedom to change words and thus should be able to get to higher activations than corpus search alone.")},i.a.createElement("sup",null,"[i]")),". When changing single words, the model sometimes found one that led to a high activation, but not always. For whole sentences, the success rate was reduced even more. This meant that our idea of feature visualization for text was not working."),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Changing Words with BERT"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"There are different options of which words to change using Deep Dream. We always kept the CLS and SEP tokens static. CLS is a special classification token used by BERT for some downstream tasks, while SEP marks the end of a sentence. When we allowed the model to change these tokens as well, it seemed to be even more confused and the approach completely failed. In between those special tokens, one can change anything from one word to the whole sentence, albeit with mixed results."))),i.a.createElement("p",{className:"normalText"},"The lack of success in dreaming words to highly activate specific neurons was surprising to us. This method uses gradient descent and seemed to work for other models (",i.a.createElement("a",{href:"https://www.aclweb.org/anthology/W18-5437"},"see Poerner et. al. 2018"),"). However, BERT is a complex model, arguably much more complex than the models that have been previously investigated with this method."),i.a.createElement("p",{className:"normalText"},"So, why is BERT such a bad dreamer? This is a question we tried to answer ",i.a.createElement("a",{href:"https://ai.google/research/teams/brain/pair"},"PAIR"),"-style, by providing explainability approaches to visually inspect those dreaming results",i.a.createElement(C.a,{title:i.a.createElement("span",{className:"styledTooltip"},"We used these tools to reason about our approaches with BERT, but if you run into similar problems, feel free to use them with any model. All tools presented within this are publicly available on GitHub.")},i.a.createElement("sup",null,"[i]")),"."))}}]),a}(i.a.Component),Mt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"The first question we wanted to answer for these dreaming processes is how the input representation evolves. Here it is interesting to look at:"),i.a.createElement("ol",{className:"normalText"},i.a.createElement("li",null,i.a.createElement("p",null,"When and how the model replaces certain words.")),i.a.createElement("li",null,i.a.createElement("p",null,"How the activation value of the neuron we are trying to maximize evolves.")),i.a.createElement("li",null,i.a.createElement("p",null,"How the activation value would evolve if we always just picked the top-ranked token instead of the softmax combination we use during optimization.")),i.a.createElement("li",null,i.a.createElement("p",null,"How these interact with the change of temperature which forces the model to pick real tokens."))),i.a.createElement("p",{className:"normalText"},"As can be seen in this visualization, we were not able to consistently get back to the same or a higher activation than what we started with. This is despite this approach has a lot more freedom to change words than corpus search. We had some ideas on why this might not always work as expected:"),i.a.createElement("ol",{className:"normalText"},i.a.createElement("li",null,i.a.createElement("p",null,"Temperature annealing seems to first, allow the model to pick any linear combination of tokens, before gradually reducing the number of tokens used for this linear combination. What if some tokens get removed from the combination but would highly activate the neuron in isolation?")),i.a.createElement("li",null,i.a.createElement("p",null,"What if the model is so specialized that a neuron is highly activated by some specific token but not by that token's neighbors in embedding space?"))),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Easier Conditions"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"To look at these processes and what might go wrong here, we made the problem easier by having it only change one word in the input sentence. While the probability of getting to a high activation value is higher than when changing the whole sentence, it still did not work out all the time."))))}}]),a}(i.a.Component),Lt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"To investigate our first idea for why BERT might have problems with dreaming, we wanted to see how the annealing progresses. Here, we were interested in how the softmax token-distribution changed throughout the process. We see how the model first uses a linear combination of many tokens to get to activation values that could not be achieved with any single token alone. Then, the model is forced by the temperature value to reduce this bag of tokens, whereas the number of tokens used for the linear combination is reduced step-by-step. In many cases, the model cannot switch back to a single, highly activating token after this reduction."))}}]),a}(i.a.Component),Gt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"It is also interesting to look at this in combination with the top activations for a specific word position. We can do that by checking the activation for each word in the vocabulary. Interestingly, often none of the tokens that have high weights in the linear combination of tokens to input into the model can be found in these top activating ones. This shows one possible problem with this method and supports our theory that sometimes the annealing process removes highly activating tokens from the set of tokens that can be selected by the dreaming process."))}}]),a}(i.a.Component),zt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"Another possible reason this method doesn't always lead to the desired results is that the optimization problem is hard. A reason for this could be that the model's neurons are highly specialized on certain tokens, while all the tokens around it might not activate the neuron as much. To explore this possibility, we developed another visualization that allows us to look at activations for tokens that are close to the token we know highly activates the neuron. We see that sometimes words that are close in the high-dimensional embedding to the word we know produces a high activation, do not also activate the neuron that much. This could be an indication that some neurons are so specialized, that it gets extremely hard to find optima using gradient descent, and might indeed be another reason for why these dreaming approaches sometimes fail to produce the expected results."))}}]),a}(i.a.Component),Bt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"To test the general applicability of this approach in a simpler setting, we tried to reconstruct activations instead of maximizing them. For this experiment, we fed a sentence into the network, saved the activation for a specific layer, and then tried to get back to this initial sentence using Deep Dream."),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Experiment Details"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"Instead of looking for single neurons, we reconstructed the activation for the entire layer. As an initial input for the optimization problem, we used a random input sentence with the same length as the target sentence. We then used the same technique of changing the input to the network through gradient descent. This time, the optimization target was to minimize the difference between our saved activation and the input to the network. We used the same sentence for every layer, to see how this unfolds in different stages of the network."))),i.a.createElement("p",{className:"normalText"},"Surprisingly, these experiments seem to work comparably well. Even more interesting: this indicates not only that our approach has no major conceptual flaws, but reveals additional insight into the workings of BERT."),i.a.createElement("p",{className:"normalText"},"One such insight is that it seems to be easier to completely reconstruct the activation for earlier layers. Layers that take on later processing steps are consistently harder to reconstruct. Another interesting analysis is too look at which words get replaced in each of the layers. While some words cannot be reconstructed relatively early, which indicates that they might not be as important, others are replaced by conceptually similar words, which hints at how the model is able to reason about language. Other, seemingly important words are consistently reconstructed across all layers."),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Detailed Results"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},'In example 1, we can see that connections such as the word "for", commas, and the word "and" seem to get replaced with seemingly random words relatively early. As these words are not really important to understand the general meaning of the sentence, them being less important for the reconstruction of activation results seems just natural. Other words, such as "duties", "include", and "sites" are replaced by conceptually similar words, such as "interests", "reflect", and "venues" in some of the layers. These replacements could sometimes even be considered drop-in replacements that preserve the overall meaning of the sentence. This is in line with the general assumption that such models first look for fine-grained structures and details in the input, before moving to the recognition of more general concepts. Interestingly, some words are consistently reconstructed across all layers. It seems like these words are especially important for the network to understand the sentence. This indicates that for some tokens, the exact representation is of great importance for understanding the sentence, while others can be replaced without as much loss of information.'))),i.a.createElement("p",{className:"normalText"},"All in all, this experiment provided more insight than we initially expected, which led us to build on this and try something similar."))}}]),a}(i.a.Component),Ut=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},'If reconstructing activations works, what happens if we change some activations? To investigate potential bias in such models, we wanted to make meaningful changes to the activations and look into what the model makes of these changes during reconstruction. Thus, we changed activations of gender-specific words in the directions of their counterparts, e.g. "he" in the direction of "she".'),i.a.createElement(me.a,null,i.a.createElement(ue.a,{expandIcon:i.a.createElement(de.a,null),classes:{expanded:"expandedPanel"}},"Technical Details"),i.a.createElement(pe.a,null,i.a.createElement("p",{className:"smallText"},"Performing such changes can be done with some preprocessing. First, we gathered sentences for two concepts we want to test bias for. Then, we fed all these sentences through the network and saved the activation value for the concept-word in each layer. This gave us a representation of both concepts per layer. To then find a direction to reasonably change the activation towards, we used ",i.a.createElement("a",{href:"https://arxiv.org/pdf/1711.11279.pdf"},"Concept Activation Vectors (CAV)"),'. Thus, we trained linear classifiers between activations for both concepts. The vector that is orthogonal to the classification boundary could then be used as the direction to shift the activation by simply adding it to the original activation value. To follow this idea, we used a corpus of sentences containing male and female pronouns, namely "he" and "she". After obtaining the CAV for these concepts, we use the same approach of reconstructing activations as before. The only difference here is, that the activation that is to be reconstructed gets changed before the reconstruction process. To be more precise, we change the activation that we retrieved for a sentence at the position of a pronoun. The activations of all the other tokens are kept the same.'))),i.a.createElement("p",{className:"normalText"},'Interestingly, not only did a change occur during reconstruction of the token we shifted the activation for, but also for some of the tokens for which the activations were untouched. Most exciting was that sometimes the token "her" changed to "his", which matches the direction we shifted the pronoun token. Thus, even though we only changed the pronoun, this was so important for the model, that other tokens could be changed on this basis. On the other hand, we were not able to find even stronger indications of bias, where for example, the model would change the word "baseball" so something it understands as more "female". Also, as with all the other experiments we conducted, the results were neither completely reproducible nor predictable.'))}}]),a}(i.a.Component),Ft=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,className:"explanationItem overflow"},i.a.createElement("p",{className:"normalText"},"This explainable shows experiments aimed at looking into what a deep transformer language model, namely BERT, has learned. Although our attempts didn't work as well as we were hoping, we got some interesting insights into how a language model builds up its understanding of text using these methods. Thus, we are not giving up, and hope that one day we can understand what individual components of text models have learned through approaches like these. To support further research in this direction, we open-sourced all our ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/python"},"code")," and ",i.a.createElement("a",{href:"https://github.com/PAIR-code/interpretability/tree/master/text-dream/webapp"},"visualizations"),"."),i.a.createElement("p",{className:"normalText"},i.a.createElement("span",null,"Many thanks to Martin Wattenberg, Nina Poerner, and Ian Tenney for helpful feedback and discussions about this research, and to David Weinberger for editorial input.")))}}]),a}(i.a.Component),qt=a(74),Yt=a.n(qt),Qt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(O.a,{item:!0},i.a.createElement(E.b,{to:"/textspecial"},i.a.createElement(Z.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(Yt.a,null)},"Start Exploring"))))}}]),a}(i.a.Component),Xt=a(75),Zt=a.n(Xt),$t=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(O.a,{item:!0},i.a.createElement(E.b,{to:this.props.prev},i.a.createElement(Z.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(Zt.a,null)},"Back"))),i.a.createElement(O.a,{item:!0},i.a.createElement(E.b,{to:this.props.next},i.a.createElement(Z.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(Yt.a,null)},"Next"))))}}]),a}(i.a.Component),Kt=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2},i.a.createElement(O.a,{item:!0},i.a.createElement(E.b,{to:"/shiftvis"},i.a.createElement(Z.a,{variant:"contained",color:"secondary",endIcon:i.a.createElement(Zt.a,null)},"Back"))))}}]),a}(i.a.Component),ea=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,xs:!0,className:"explanationItem"},i.a.createElement("img",{src:"https://2.bp.blogspot.com/-17ajatawCW4/VYITTA1NkDI/AAAAAAAAAlM/eZmy5_Uu9TQ/s1600/classvis.png",className:"slim",alt:"Deep Dream"}),i.a.createElement("div",{className:"caption-slim"},i.a.createElement("p",null,"Examples for Deep Dream processes with images from the original Deep Dream ",i.a.createElement("a",{href:"https://ai.googleblog.com/2015/06/inceptionism-going-deeper-into-neural.html"},"blogpost"),". Here, they take a randomly initialized image and use Deep Dream to transform the image by maximizing the activation of the corresponding output neuron. This can show what a network has learned about different classes or for individual neurons.")))}}]),a}(i.a.Component),ta=a(189),aa=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t,a){var n=JSON.parse(JSON.stringify(e.props.softmaxStatus));n.temperature=a,e.props.actions.changeSoftmaxStatus(n)},e}return Object(g.a)(a,[{key:"softmaxTemp",value:function(e,t){var a=Math.max.apply(Math,Object(ee.a)(e)),n=e.map((function(e){return Math.exp(e/t-a)})).reduce((function(e,t){return e+t}));return e.map((function(e,r){var i=Math.exp(e/t-a)/n;return Math.round(100*(i+Number.EPSILON))/100}))}},{key:"render",value:function(){var e=this,t=this.softmaxTemp(this.props.softmaxStatus.values,1),a=this.softmaxTemp(this.props.softmaxStatus.values,this.props.softmaxStatus.temperature);return i.a.createElement(O.a,{container:!0,direction:"column",spacing:2},i.a.createElement(O.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(O.a,{item:!0,xs:2},"Temperature:"),i.a.createElement(O.a,{item:!0,xs:!0},i.a.createElement(Oe.a,{step:.1,min:.01,max:2,value:this.props.softmaxStatus.temperature,valueLabelDisplay:"on",onChange:this.handleChange}))),i.a.createElement(O.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(O.a,{item:!0,xs:2},"Word Score:"),this.props.softmaxStatus.values.map((function(t,a){return i.a.createElement(O.a,{item:!0,xs:2,key:a},i.a.createElement(ta.a,{label:e.props.softmaxStatus.labels[a],value:t,onChange:function(t){var n=JSON.parse(JSON.stringify(e.props.softmaxStatus)),r=isNaN(parseFloat(t.target.value))?0:parseFloat(t.target.value);n.values[a]=r,e.props.actions.changeSoftmaxStatus(n)}}))}))),i.a.createElement(O.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(O.a,{item:!0,xs:2},"Softmax Score:"),t.map((function(e,t){return i.a.createElement(O.a,{item:!0,xs:2,key:t},e)}))),i.a.createElement(O.a,{item:!0,container:!0,justify:"center",spacing:2},i.a.createElement(O.a,{item:!0,xs:2},"With Temp.:"),a.map((function(e,t){return i.a.createElement(O.a,{item:!0,xs:2,key:t},e)}))))}}]),a}(i.a.PureComponent);var na=Object(l.b)((function(e,t){return{softmaxStatus:e.softmaxStatus}}),(function(e){return{actions:Object(c.b)(n,e)}}))(aa),ra=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return i.a.createElement(O.a,{item:!0,xs:!0,className:"explanationItem"},i.a.createElement(na,null))}}]),a}(i.a.Component),ia=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadDream(this.props.dreamID)}},{key:"render",value:function(){var e=$e(this.props.dreamVisJSON,0);return i.a.createElement(O.a,{item:!0,xs:!0,className:"fullHeight"},e)}}]),a}(i.a.Component);var sa=Object(l.b)((function(e,t){return{dreamID:e.dreamID,dreamVisJSON:e.dreamVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(ia),oa=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadAnnealing(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=$e(this.props.annealingVisJSON,0);return i.a.createElement(O.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var ca=Object(l.b)((function(e,t){return{dreamID:e.dreamID,annealingVisJSON:e.annealingVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(oa),la=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){console.log("topwords"),this.props.actions.loadTopWords(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=$e(this.props.topWordsVisJSON,0);return i.a.createElement(O.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var ma=Object(l.b)((function(e,t){return{dreamID:e.dreamID,topWordsVisJSON:e.topWordsVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(la),ua=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadSimilarWords(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=$e(this.props.similarVisJSON,0);return i.a.createElement(O.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var pa=Object(l.b)((function(e,t){return{dreamID:e.dreamID,similarVisJSON:e.similarVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(ua),ha=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadReconstruction(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=$e(this.props.reconstructVisJSON,0);return i.a.createElement(O.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var da=Object(l.b)((function(e,t){return{dreamID:e.dreamID,reconstructVisJSON:e.reconstructVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(ha),fa=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.loadShiftedReconstruction(this.props.dreamID);var e=document.getElementById("cardItem");null!=e&&this.props.actions.changeCardDimensions({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height})}},{key:"render",value:function(){var e=$e(this.props.shiftVisJSON,0);return i.a.createElement(O.a,{item:!0,xs:!0,className:"fullHeight",id:"cardItem"},e)}}]),a}(i.a.Component);var ga=Object(l.b)((function(e,t){return{dreamID:e.dreamID,shiftVisJSON:e.shiftVisJSON}}),(function(e){return{actions:Object(c.b)(n,e)}}))(fa);var ba=[{heading:i.a.createElement(At,{title:"Feature Visualization for Text?"}),texts:i.a.createElement(Wt,null),buttons:i.a.createElement(Qt,null),illustration:i.a.createElement(ea,null)},{heading:i.a.createElement(At,{title:"Textual Models"}),texts:i.a.createElement(Ht,null),buttons:i.a.createElement($t,{prev:"/featurevis",next:"/bertresults"}),illustration:i.a.createElement(ra,null)},{heading:i.a.createElement(At,{title:"Results with BERT"}),texts:i.a.createElement(Vt,null),buttons:i.a.createElement($t,{prev:"/textspecial",next:"/dreamvis"}),illustration:null},{heading:i.a.createElement(At,{title:"Visualized Dreams"}),texts:i.a.createElement(Mt,null),buttons:i.a.createElement($t,{prev:"/bertresults",next:"/annealingvis"}),illustration:i.a.createElement(sa,null)},{heading:i.a.createElement(At,{title:"Annealing Processes Visualized"}),texts:i.a.createElement(Lt,null),buttons:i.a.createElement($t,{prev:"/dreamvis",next:"/topvis"}),illustration:i.a.createElement(ca,null)},{heading:i.a.createElement(At,{title:"Top Words Visualized"}),texts:i.a.createElement(Gt,null),buttons:i.a.createElement($t,{prev:"/annealingvis",next:"/similarvis"}),illustration:i.a.createElement(ma,null)},{heading:i.a.createElement(At,{title:"Activations for Similar Words"}),texts:i.a.createElement(zt,null),buttons:i.a.createElement($t,{prev:"/topvis",next:"/reconstructvis"}),illustration:i.a.createElement(pa,null)},{heading:i.a.createElement(At,{title:"Reconstructing known Activations"}),texts:i.a.createElement(Bt,null),buttons:i.a.createElement($t,{prev:"/similarvis",next:"/shiftvis"}),illustration:i.a.createElement(da,null)},{heading:i.a.createElement(At,{title:"Reconstructing changed Activations"}),texts:i.a.createElement(Ut,null),buttons:i.a.createElement($t,{prev:"/reconstructvis",next:"/conclusionvis"}),illustration:i.a.createElement(ga,null)},{heading:i.a.createElement(At,{title:"Conclusion"}),texts:i.a.createElement(Ft,null),buttons:i.a.createElement(Kt,null),illustration:null}],va=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.actions.changeProgressPage(this.props.index+1)}},{key:"render",value:function(){var e,t=(e=this.props.index,ba[e]);return i.a.createElement(O.a,{container:!0,alignItems:"center",spacing:2,className:"fullHeight",justify:"center"},i.a.createElement(O.a,{item:!0,xs:6,container:!0,direction:"column",spacing:2,className:"fullHeight",justify:"center",wrap:"nowrap"},t.heading,t.texts,t.buttons),t.illustration)}}]),a}(i.a.Component);var Ea=Object(l.b)(null,(function(e){return{actions:Object(c.b)(n,e)}}))(va),ya=function(e){Object(b.a)(a,e);var t=Object(v.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return r.createElement("div",{className:"content"},r.createElement(E.a,{basename:"/interpretability/text-dream/interactive"},r.createElement("header",null,r.createElement(_t,null)),r.createElement(O.a,{container:!0,direction:"column",className:"fullHeight"},r.createElement(Pt,null),r.createElement(O.a,{item:!0,xs:!0,className:"fullHeight"},r.createElement("div",{className:"full"},r.createElement(y.a,{exact:!0,path:"/"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:0}))})),r.createElement(y.a,{exact:!0,path:"/featurevis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:0}))})),r.createElement(y.a,{exact:!0,path:"/textspecial"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:1}))})),r.createElement(y.a,{exact:!0,path:"/bertresults"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:2}))})),r.createElement(y.a,{exact:!0,path:"/dreamvis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:3}))})),r.createElement(y.a,{exact:!0,path:"/annealingvis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:4}))})),r.createElement(y.a,{exact:!0,path:"/topvis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:5}))})),r.createElement(y.a,{exact:!0,path:"/similarvis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:6}))})),r.createElement(y.a,{exact:!0,path:"/reconstructvis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:7}))})),r.createElement(y.a,{exact:!0,path:"/shiftvis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:8}))})),r.createElement(y.a,{exact:!0,path:"/conclusionvis"},(function(e){var t=e.match;return r.createElement(w.a,{in:null!=t,timeout:300,classNames:"page",unmountOnExit:!0},r.createElement(Ea,{index:9}))})))))))}}]),a}(r.Component),wa={cardDimensions:{width:10,height:10},activeColors:[],softmaxStatus:{values:[2.2,.8,1.4,1,.1],labels:["Dog","Cat","Monkey","Car","Truck"],temperature:1},progress:{page:1,of:10},topWordsIteration:0,dreamVisJSON:{},dreamID:1,annealingVisJSON:{},topWordsVisJSON:{},similarVisJSON:{},reconstructVisJSON:{},shiftVisJSON:{}};var Oa=a(92);var xa=Object(c.c)({cardDimensions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.cardDimensions,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_CARD_DIMENSIONS":var a={width:t.dimensions.width,height:t.dimensions.height-50};return a;default:return e}},activeColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.activeColors,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ACTIVE_COLORS":return e.concat([t.colors]);case"REMOVE_ACTIVE_COLORS":var a=Object(ee.a)(e);return a.splice(t.index,1),a;default:return e}},softmaxStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.softmaxStatus,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SOFTMAX_STATUS":return t.status;default:return e}},progress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.progress,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_PROGRESS_PAGE":return Object(Oa.a)(Object(Oa.a)({},e),{},{page:t.page});default:return e}},topWordsIteration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.topWordsIteration,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TOP_WORDS_ITERATION":return t.iteration;default:return e}},dreamID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.dreamID,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DREAM_ID":return t.id;default:return e}},dreamVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.dreamVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DREAM_SUCCESS":return t.results;default:return e}},annealingVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.annealingVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ANNEALING_SUCCESS":return t.results;default:return e}},topWordsVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.topWordsVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_TOP_WORDS_SUCCESS":return t.results;default:return e}},similarVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.similarVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SIMILAR_WORDS_SUCCESS":return t.results;default:return e}},reconstructVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.reconstructVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_RECONSTRUCTION_SUCCESS":return t.results;default:return e}},shiftVisJSON:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa.shiftVisJSON,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SHIFTED_RECONSTRUCTION_SUCCESS":return t.results;default:return e}}}),ka=Object(c.d)(xa,Object(c.a)(m.a)),ja=Object(p.a)({palette:{primary:{light:d.a[300],main:d.a[900],dark:d.a[700]},secondary:{light:"rgba(255, 179, 68, 0.1)",main:"rgba(255, 179, 68, 0.2)",dark:"rgba(255, 179, 68, 0.6)"}},typography:{useNextVariants:!0}}),Ia=function(){return i.a.createElement(h.a,{theme:ja},i.a.createElement(l.a,{store:ka},i.a.createElement(u.a,null),i.a.createElement(ya,null)))},Na=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Da(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(142);o.a.render(i.a.createElement(Ia,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("//interpretability/text-dream/interactive",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("//interpretability/text-dream/interactive","/service-worker.js");Na?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Da(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Da(e)}))}}()}},[[127,1,2]]]);
//# sourceMappingURL=main.ae1c4065.chunk.js.map